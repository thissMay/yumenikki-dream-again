[gd_scene load_steps=16 format=4 uid="uid://b67q2b5hm6tsu"]

[ext_resource type="Script" uid="uid://b1ofr4umso5jf" path="res://src/systems/scenes/game/game_scene.gd" id="1_inoc5"]
[ext_resource type="Texture2D" uid="uid://dcvm31baeql4h" path="res://src/levels/__ignore/tilemaps/eye_world_tileset.png" id="2_60beh"]
[ext_resource type="Shader" uid="uid://dqxrs4a4y611c" path="res://src/shaders/panorama/linear.gdshader" id="2_odm8p"]
[ext_resource type="Texture2D" uid="uid://cpsg4xvrbf3mo" path="res://src/images/panorama/eyeball_panorama.png" id="3_4j00j"]
[ext_resource type="PackedScene" uid="uid://crej0xx7uj05p" path="res://src/levels/__ignore/door.tscn" id="3_07q2v"]
[ext_resource type="PackedScene" uid="uid://djnomncx1otsq" path="res://src/systems/seamless_detector.tscn" id="4_cu3a0"]
[ext_resource type="PackedScene" uid="uid://c8bnpo28a373g" path="res://src/systems/camera/camera.tscn" id="4_sthxv"]
[ext_resource type="Script" uid="uid://b4b3kjcm65mv6" path="res://src/systems/audio/bgm.gd" id="5_cu3a0"]
[ext_resource type="AudioStream" uid="uid://dexpefjcufc0b" path="res://src/audio/bgm/world_eyeball.ogg" id="6_jutn4"]
[ext_resource type="PackedScene" uid="uid://ryhx8o46er7i" path="res://src/player/madotsuki/madotsuki.tscn" id="9_4j00j"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_sthxv"]
shader = ExtResource("2_odm8p")
shader_parameter/transparency = 0.0
shader_parameter/dirX = -1.0
shader_parameter/dirY = 1.0
shader_parameter/scroll_speed = 0.05
shader_parameter/initial_uv_offset = Vector2(0, 0)
shader_parameter/offset_strength = 0.15
shader_parameter/offset_strength_x_influence = 1.0
shader_parameter/offset_strength_y_influence = 1.0

[sub_resource type="TileMapPattern" id="TileMapPattern_jutn4"]
tile_data = PackedInt32Array(0, 131072, 0, 65536, 131072, 1, 131072, 131072, 3)

[sub_resource type="TileMapPattern" id="TileMapPattern_odm8p"]
tile_data = PackedInt32Array(0, 131072, 0, 65536, 131072, 1, 131072, 131072, 2, 196608, 131072, 3)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_4j00j"]
texture = ExtResource("2_60beh")
texture_region_size = Vector2i(15, 15)
0:0/0 = 0
0:1/0 = 0
3:1/size_in_atlas = Vector2i(2, 1)
3:1/0 = 0
3:2/size_in_atlas = Vector2i(2, 1)
3:2/0 = 0
2:1/0 = 0
2:2/0 = 0
2:3/0 = 0
4:4/size_in_atlas = Vector2i(4, 3)
4:4/0 = 0
4:7/size_in_atlas = Vector2i(4, 3)
4:7/0 = 0
0:6/size_in_atlas = Vector2i(3, 2)
0:6/0 = 0
0:8/size_in_atlas = Vector2i(2, 2)
0:8/0 = 0
8:2/size_in_atlas = Vector2i(2, 1)
8:2/0 = 0
8:0/size_in_atlas = Vector2i(2, 2)
8:0/0 = 0
8:3/size_in_atlas = Vector2i(2, 2)
8:3/0 = 0
8:5/size_in_atlas = Vector2i(2, 1)
8:5/0 = 0
0:4/size_in_atlas = Vector2i(3, 2)
0:4/0 = 0
2:0/animation_speed = 5.0
2:0/animation_mode = 1
2:0/animation_frame_0/duration = 1.0
2:0/animation_frame_1/duration = 1.0
2:0/animation_frame_2/duration = 1.0
2:0/animation_frame_3/duration = 1.0
2:0/0 = 0

[sub_resource type="TileSet" id="TileSet_sthxv"]
tile_size = Vector2i(15, 15)
sources/0 = SubResource("TileSetAtlasSource_4j00j")
pattern_0 = SubResource("TileMapPattern_jutn4")
pattern_1 = SubResource("TileMapPattern_odm8p")

[node name="eyeball_world" type="Node"]
script = ExtResource("1_inoc5")
metadata/_custom_type_script = "uid://b1ofr4umso5jf"

[node name="panorama (bottom_layer)" type="CanvasLayer" parent="."]
layer = -30

[node name="EyeballPanorama" type="TextureRect" parent="panorama (bottom_layer)"]
material = SubResource("ShaderMaterial_sthxv")
offset_right = 480.0
offset_bottom = 300.0
texture = ExtResource("3_4j00j")
stretch_mode = 6

[node name="camera" parent="." instance=ExtResource("4_sthxv")]

[node name="camera_handler" parent="camera" index="0" node_paths=PackedStringArray("target")]
target = NodePath("../../Madotsuki")

[node name="tilemap" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAAHAAAAAAAAAAEAAAAJAAMAAAAAAAAAAAAAAAMAAAAAAAEAABABAAYAAAAAAAAAAAD/////AAAAAAAAABAeAPz/AAAAAAAAABAhAP7/AAAAAAEAAAASAAQAAAACAAAAABASAAUAAAACAAEAABASAAYAAAACAAMAABAlAP7/AAACAAAAABAlAP//AAACAAEAABAlAAAAAAACAAMAABAvAAoAAAACAAAAABAvAAsAAAACAAEAABAvAAwAAAACAAMAABAxAAsAAAAEAAQAAAA0AAoAAAACAAAAAAA0AAsAAAACAAEAAAA0AAwAAAACAAMAAAA1AAgAAAACAAAAABA1AAkAAAACAAEAABA1AAoAAAACAAMAABA3AAkAAAAEAAcAAAA6AAgAAAACAAAAAAA6AAkAAAACAAEAAAA6AAoAAAACAAMAAAAfAB4AAAADAAEAAAAgAB8AAAADAAEAAAAhACAAAAADAAEAAAAiAB8AAAADAAEAABAjAB4AAAADAAEAABAkACEAAAACAAEAAAAlACAAAAACAAEAAAAmAB8AAAACAAEAAAAnAB0AAAACAAAAAAAnAB4AAAACAAEAAAAnAB8AAAACAAMAAAAnACAAAAACAAAAAAAbAB0AAAACAAAAABAbAB4AAAACAAEAABAbAB8AAAACAAMAABAbACAAAAACAAAAABAbACEAAAACAAEAABAbACIAAAACAAMAABAcAB4AAAACAAAAABAcAB8AAAACAAEAABAcACAAAAACAAMAABAcACEAAAACAAAAABAcACIAAAACAAEAABAcACMAAAACAAMAABAdAB8AAAACAAAAABAdACAAAAACAAEAABAdACEAAAACAAMAABAdACIAAAACAAAAABAdACMAAAACAAEAABAdACQAAAACAAMAABAeACAAAAACAAAAABAeACEAAAACAAEAABAeACIAAAACAAMAABAeACMAAAACAAAAABAeACQAAAACAAEAABAeACUAAAACAAMAABAfACQAAAADAAEAAAAgACEAAAADAAEAAAAgACMAAAADAAEAAAAgACUAAAADAAEAAAAhACIAAAADAAEAAAAhACYAAAADAAEAAAAiACEAAAADAAEAABAiACMAAAADAAEAABAiACUAAAADAAEAABAjACQAAAADAAEAABAkACAAAAACAAAAAAAkACIAAAACAAMAAAAkACMAAAACAAAAAAAkACQAAAACAAEAAAAkACUAAAACAAMAAAAlAB8AAAACAAAAAAAlACEAAAACAAMAAAAlACIAAAACAAAAAAAlACMAAAACAAEAAAAlACQAAAACAAMAAAAmAB4AAAACAAAAAAAmACAAAAACAAMAAAAmACEAAAACAAAAAAAmACIAAAACAAEAAAAmACMAAAACAAMAAAAnACEAAAACAAEAAAAnACIAAAACAAMAAAA2APf/AAAAAAEAAAA7APX/AAAAAAAAABABAEAAAAACAAAAABABAEEAAAACAAEAABABAEIAAAACAAMAABAEAEAAAAACAAAAAAAEAEEAAAACAAEAAAAEAEIAAAACAAMAAAABAD8AAAAAAAEAAAAEAD8AAAAAAAAAABAYABkAAAAAAAAAAABGABsAAAAAAAEAAABGABwAAAAAAAAAAABHAB0AAAAAAAAAAABIAB4AAAAAAAAAAABJAB8AAAAAAAAAAABKAB0AAAAAAAEAAABMAB8AAAAAAAAAAABQAB0AAAAAAAAAAABSABsAAAAAAAEAABBRABsAAAAAAAAAABBQABsAAAAAAAAAABBOABoAAAAAAAEAABBNABsAAAAAAAEAABBMABsAAAAAAAEAABBSAB4AAAAAAAAAAABSAB8AAAAAAAEAAABTAB8AAAAAAAAAAABUAB8AAAAAAAEAAABUACAAAAAAAAAAAABNACEAAAAAAAEAAABLACEAAAAAAAAAAABLACIAAAAAAAEAAABRAB4AAAAAAAEAABBUABwAAAAAAAAAABBVAB4AAAAAAAEAABBWABwAAAAAAAEAABBWABoAAAAAAAAAABBUABkAAAAAAAAAABBMABkAAAAAAAAAABBKABsAAAAAAAAAABBIABsAAAAAAAAAABBOABcAAAAAAAEAABBGACAAAAAAAAAAABBIACEAAAAAAAEAABBRACIAAAAAAAAAAABHAAcAAAACAAAAAABHAAgAAAACAAEAAABHAAkAAAACAAIAAABHAAoAAAACAAIAAABHAAsAAAACAAIAAABHAAwAAAACAAIAAABHAA0AAAACAAMAAABJAAkAAAACAAEAAABJAAoAAAACAAIAAABJAAsAAAACAAIAAABJAAwAAAACAAMAAABJAAgAAAACAAAAAABKAAoAAAACAAAAABBKAAsAAAACAAEAABBKAAwAAAACAAIAABBKAA0AAAACAAIAABBKAA4AAAACAAMAABBFAAoAAAACAAMAABBGAA0AAAACAAEAAABGAA4AAAACAAIAAABGAA8AAAACAAMAAABFAAgAAAACAAAAABBFAAkAAAACAAEAABBGAAwAAAACAAAAAABIAAoAAAACAAAAAABIAAsAAAACAAEAAABIAAwAAAACAAIAAABIAA0AAAACAAMAAABUAP3/AAACAAAAABBUAP7/AAACAAEAABBUAP//AAACAAIAABBUAAAAAAACAAMAABBWAP//AAACAAAAAABWAAAAAAACAAEAAABWAAEAAAACAAIAAABWAAIAAAACAAMAAABXAAEAAAACAAAAAABXAAIAAAACAAEAAABXAAMAAAACAAIAAABXAAQAAAACAAMAAABVAAEAAAACAAAAABBVAAIAAAACAAEAABBVAAMAAAACAAIAABBVAAQAAAACAAMAABBPAD0AAAACAAAAABBPAD4AAAACAAEAABBPAD8AAAACAAIAABBPAEAAAAACAAMAABAkAD4AAAAEAAQAAAAUADgAAAAEAAcAAAAYADgAAAAAAAYAAAAZADoAAAAAAAgAAAAiAEEAAAAAAAQAAAAlAEEAAAAAAAgAAAACADEAAAAAAAgAAAAEADAAAAAAAAYAAAAfABwAAAAAAAYAAABWAA8AAAAAAAYAAABCABIAAAAAAAQAAABHABQAAAAAAAgAAABGABQAAAAAAAgAAAApAAQAAAAAAAQAAAAsAAIAAAAAAAgAAAARAP3/AAAAAAgAAADy/x0AAAAAAAEAAADy/yIAAAAAAAAAABD0/yAAAAAAAAAAAAD0/yMAAAAAAAEAABD1/yEAAAAAAAAAAAD2/x8AAAAAAAEAAAD4/xsAAAAAAAAAABD4/x0AAAAAAAEAABD4/yEAAAAAAAAAAAD5/yAAAAAAAAEAAAD6/xwAAAAAAAEAABD7/yEAAAAAAAAAAAD8/yEAAAAAAAAAAAD9/x4AAAAAAAAAABD9/yAAAAAAAAAAAAD5/yQAAAAAAAEAAAD6/yMAAAAAAAEAAAD7/yMAAAAAAAEAAADw/x4AAAAAAAAAAADx/x8AAAAAAAAAAAD2/xoAAAAAAAAAABDx/xoAAAAAAAAAABD+/x0AAAAAAAEAABD1/ycAAAAAAAAAAADz/xAAAAACAAAAABDz/xEAAAACAAEAABDz/xIAAAACAAIAABDz/xMAAAACAAMAABD0/w4AAAACAAAAABD0/w8AAAACAAEAABD0/xAAAAACAAIAABD0/xEAAAACAAMAABD0/xIAAAACAAAAAAD0/xMAAAACAAEAAAD0/xQAAAACAAMAAAD3/xMAAAACAAIAAAD3/xQAAAACAAIAAAD3/xUAAAACAAMAAAD3/wsAAAACAAAAAAD5/woAAAACAAAAAAD5/wsAAAACAAEAAAD5/wwAAAACAAIAAAD5/w0AAAACAAMAAAD3/wwAAAACAAEAAAD3/w0AAAACAAIAAAD3/w4AAAACAAIAAAD3/w8AAAACAAIAAAD3/xAAAAACAAIAAAD3/xEAAAACAAIAAAD3/xIAAAACAAIAAAD2/xIAAAACAAIAABD2/xMAAAACAAIAABD2/xQAAAACAAIAABD2/xUAAAACAAIAABD2/xYAAAACAAMAABD2/w4AAAACAAAAABD2/w8AAAACAAEAABD2/xAAAAACAAIAABD2/xEAAAACAAIAABDw/xEAAAACAAAAABDw/xIAAAACAAEAABDw/xMAAAACAAIAABDw/xQAAAACAAMAABAEAPP/AAAAAAEAAAAWAPb/AAAAAAAAAAAoAPL/AAAAAAEAAABJAPT/AAAAAAEAABBSAPj/AAAAAAEAABAhAPb/AAAAAAEAABAPAPD/AAAAAAAAAAAHAPb/AAAAAAAAAAD1//T/AAAAAAEAAAAHAA0AAAAAAAAAAABLAC8AAAAAAAAAABA5ADIAAAAAAAAAABA5AB8AAAAAAAEAAAAkADEAAAAAAAAAAAAKACMAAAAAAAAAABAMABMAAAAAAAAAABAoAA8AAAAAAAAAABAvACEAAAAAAAAAAABTACQAAAAAAAEAAABUACYAAAAAAAEAAABVACQAAAAAAAAAAABVACYAAAAAAAEAAABPACYAAAAAAAAAAABfABEAAAACAAAAABBfABIAAAACAAEAABBfABMAAAACAAIAABBfABQAAAACAAMAABBfAB4AAAAAAAAAAABgABoAAAAAAAAAABBgAB8AAAAAAAAAAABhAB0AAAAAAAEAAABhACIAAAAAAAAAABBiABAAAAACAAAAABBiABEAAAACAAEAABBiABIAAAACAAIAABBiABMAAAACAAMAABBjAA4AAAACAAAAABBjAA8AAAACAAEAABBjABAAAAACAAIAABBjABEAAAACAAMAABBjABIAAAACAAAAAABjABMAAAACAAEAAABjABQAAAACAAMAAABjACAAAAAAAAAAAABjACMAAAAAAAEAABBkAPT/AAAAAAEAAABkACEAAAAAAAAAAABkACcAAAAAAAAAAABlAA4AAAACAAAAABBlAA8AAAACAAEAABBlABAAAAACAAIAABBlABEAAAACAAIAABBlABIAAAACAAIAABBlABMAAAACAAIAABBlABQAAAACAAIAABBlABUAAAACAAIAABBlABYAAAACAAMAABBlABoAAAAAAAAAABBlAB8AAAAAAAEAAABmAAsAAAACAAAAAABmAAwAAAACAAEAAABmAA0AAAACAAIAAABmAA4AAAACAAIAAABmAA8AAAACAAIAAABmABAAAAACAAIAAABmABEAAAACAAIAAABmABIAAAACAAIAAABmABMAAAACAAIAAABmABQAAAACAAIAAABmABUAAAACAAMAAABnABsAAAAAAAAAABBnAB0AAAAAAAEAABBnACEAAAAAAAAAAABoAAoAAAACAAAAAABoAAsAAAACAAEAAABoAAwAAAACAAIAAABoAA0AAAACAAMAAABoACAAAAAAAAEAAABoACQAAAAAAAEAAABpABwAAAAAAAEAABBpACMAAAAAAAEAAABqACEAAAAAAAAAAABqACMAAAAAAAEAAABrACEAAAAAAAAAAAD1/0sAAAAAAAEAAAAEAEoAAAAAAAEAAAAHAE0AAAAAAAAAAAAPAEcAAAAAAAAAAAAWAE0AAAAAAAAAAAAhAE0AAAAAAAEAABAoAEkAAAAAAAEAAAA2AE4AAAAAAAEAAAA7AEwAAAAAAAAAABBJAEsAAAAAAAEAABBSAE8AAAAAAAEAABBkAEsAAAAAAAEAAADY/wcAAAACAAAAAADY/wgAAAACAAEAAADY/wkAAAACAAIAAADY/woAAAACAAIAAADY/wsAAAACAAIAAADY/wwAAAACAAIAAADY/w0AAAACAAMAAADY/xQAAAAAAAgAAADY/x0AAAAAAAAAAADZ/woAAAACAAAAAADZ/wsAAAACAAEAAADZ/wwAAAACAAIAAADZ/w0AAAACAAMAAADZ/xsAAAAAAAAAABDZ/x4AAAAAAAAAAADZ/yEAAAAAAAEAABDa//T/AAAAAAEAABDa/wgAAAACAAAAAADa/wkAAAACAAEAAADa/woAAAACAAIAAADa/wsAAAACAAIAAADa/wwAAAACAAMAAADa/x8AAAAAAAAAAADb/woAAAACAAAAABDb/wsAAAACAAEAABDb/wwAAAACAAIAABDb/w0AAAACAAIAABDb/w4AAAACAAMAABDb/xsAAAAAAAAAABDb/x0AAAAAAAEAAADc/yEAAAAAAAAAAADc/yIAAAAAAAEAAADc/y8AAAAAAAAAABDd/xkAAAAAAAAAABDd/xsAAAAAAAEAABDd/x8AAAAAAAAAAADe/xsAAAAAAAEAABDe/yEAAAAAAAEAAADf/xcAAAAAAAEAABDf/xoAAAAAAAEAABDg/yYAAAAAAAAAAADg/z0AAAACAAAAABDg/z4AAAACAAEAABDg/z8AAAACAAIAABDg/0AAAAACAAMAABDh/xsAAAAAAAAAABDh/x0AAAAAAAAAAADi/xsAAAAAAAAAABDi/x4AAAAAAAEAABDi/yIAAAAAAAAAAADj//j/AAAAAAEAABDj/xsAAAAAAAEAABDj/x4AAAAAAAAAAADj/x8AAAAAAAEAAADk/x8AAAAAAAAAAADk/yQAAAAAAAEAAADl//3/AAACAAAAABDl//7/AAACAAEAABDl////AAACAAIAABDl/wAAAAACAAMAABDl/xkAAAAAAAAAABDl/xwAAAAAAAAAABDl/x8AAAAAAAEAAADl/yAAAAAAAAAAAADl/yYAAAAAAAEAAADm/wEAAAACAAAAABDm/wIAAAACAAEAABDm/wMAAAACAAIAABDm/wQAAAACAAMAABDm/x4AAAAAAAEAABDm/yQAAAAAAAAAAADm/yYAAAAAAAEAAADn////AAACAAAAAADn/wAAAAACAAEAAADn/wEAAAACAAIAAADn/wIAAAACAAMAAADn/w8AAAAAAAYAAADn/xoAAAAAAAAAABDn/xwAAAAAAAEAABDo/wEAAAACAAAAAADo/wIAAAACAAEAAADo/wMAAAACAAIAAADo/wQAAAACAAMAAAA=")
tile_set = SubResource("TileSet_sthxv")

[node name="nexus" parent="." instance=ExtResource("3_07q2v")]
position = Vector2(60, 15)

[node name="seamless_detector" parent="." instance=ExtResource("4_cu3a0")]
position = Vector2(-330, -270)
tile_size = Vector2i(15, 15)
expansion = Vector2i(80, 70)
boundary_size = Vector2i(1680, 1320)
min_bound_size_multiplier = Vector2i(32, 18)
min_boundary_size = Vector2i(480, 270)

[node name="BGM" type="Node" parent="."]
script = ExtResource("5_cu3a0")
stream = ExtResource("6_jutn4")
metadata/_custom_type_script = "uid://b4b3kjcm65mv6"

[node name="Madotsuki" parent="." instance=ExtResource("9_4j00j")]
position = Vector2(75, 45)

[editable path="camera"]
