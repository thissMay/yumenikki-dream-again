[gd_scene load_steps=11 format=4 uid="uid://4qtk6nnecrel"]

[ext_resource type="Script" uid="uid://b1ofr4umso5jf" path="res://src/systems/scenes/game/game_scene.gd" id="1_7eh56"]
[ext_resource type="PackedScene" uid="uid://c8bnpo28a373g" path="res://src/systems/camera/camera.tscn" id="2_61b85"]
[ext_resource type="Script" uid="uid://b4b3kjcm65mv6" path="res://src/systems/audio/bgm.gd" id="2_j13fa"]
[ext_resource type="AudioStream" uid="uid://c73s1pvspdp5w" path="res://src/audio/bgm/world_puddle.ogg" id="4_0jnag"]
[ext_resource type="Shader" uid="uid://bwrguqumtsyrq" path="res://src/shaders/masks/sprite.gdshader" id="4_61b85"]
[ext_resource type="PackedScene" uid="uid://ryhx8o46er7i" path="res://src/player/madotsuki/madotsuki.tscn" id="4_a2suj"]
[ext_resource type="Texture2D" uid="uid://d21ss1ocopvp0" path="res://src/images/panorama/puddle_panorama.png" id="4_d3qgj"]
[ext_resource type="TileSet" uid="uid://t43wqgdupoji" path="res://src/levels/__ignore/tilemaps/puddle.tres" id="7_61b85"]
[ext_resource type="PackedScene" uid="uid://djnomncx1otsq" path="res://src/systems/seamless_detector.tscn" id="9_0jnag"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_0jnag"]
shader = ExtResource("4_61b85")
shader_parameter/transparency = 0.0
shader_parameter/dirX = 1.0
shader_parameter/dirY = 0.9
shader_parameter/scroll_speed = 0.03
shader_parameter/initial_uv_offset = Vector2(0, 0)
shader_parameter/offset_strength = 0.0
shader_parameter/offset_strength_x_influence = 1.0
shader_parameter/offset_strength_y_influence = 1.0
shader_parameter/world_texture = ExtResource("4_d3qgj")

[node name="puddle_world" type="Node"]
script = ExtResource("1_7eh56")
metadata/_custom_type_script = "uid://b1ofr4umso5jf"

[node name="camera" parent="." instance=ExtResource("2_61b85")]

[node name="camera_handler" parent="camera" index="0" node_paths=PackedStringArray("target")]
target = NodePath("../../Madotsuki")

[node name="panorama (bottom_layer)" type="CanvasLayer" parent="."]
layer = -30

[node name="ColorRect" type="ColorRect" parent="panorama (bottom_layer)"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="BGM" type="Node" parent="."]
script = ExtResource("2_j13fa")
stream = ExtResource("4_0jnag")
metadata/_custom_type_script = "uid://b4b3kjcm65mv6"

[node name="puddle" type="TileMapLayer" parent="."]
clip_children = 2
z_index = -1
material = SubResource("ShaderMaterial_0jnag")
tile_map_data = PackedByteArray("AAAJAAUAAAACAAIAAAAYAAsAAAACAAIAAAAaAAYAAAACAAIAAAAUAAgAAAACAAIAAAASAAoAAAACAAIAAAAXABAAAAAEAAIAAAAhAA4AAAACAAMAAAAiABIAAAAEAAQAAAADABQAAAACAAMAAAAIABMAAAAEAAIAAAAFABEAAAAEAAIAAAAEAAgAAAACAAQAAAARAAIAAAACAAMAAAAlACEAAAAEAAQAAAA1ABQAAAACAAQAAAA0ABoAAAAEAAIAAAATABkAAAACAAMAAAAaACoAAAACAAMAAAAWACkAAAACAAMAAAA6AAcAAAADAAMAAAA3AAUAAAAEAAIAAABJACoAAAACAAIAAABHACgAAAACAAIAAABMACAAAAACAAQAAABDAA0AAAAEAAIAAAA5AB8AAAACAAIAAAAtAC0AAAACAAQAAAApACkAAAAEAAIAAAAzACMAAAAEAAIAAAAuAAIAAAACAAIAAABbAAcAAAAEAAIAAABUABQAAAADAAMAAAAPADYAAAAEAAQAAAAMADIAAAAEAAIAAAA5ADoAAAADAAMAAABDADIAAAADAAMAAABJADYAAAACAAQAAABKADYAAAAEAAIAAAAiADMAAAADAAMAAAA9ACkAAAACAAQAAABWAC0AAAAEAAIAAABXAC0AAAACAAMAAABZACUAAAADAAMAAABRACkAAAACAAMAAABZAB0AAAAEAAIAAABlABIAAAACAAMAAABkABIAAAACAAQAAAABACsAAAADAAMAAAA/ADUAAAACAAMAAABBADYAAAACAAMAAAApADcAAAADAAMAAAAsADUAAAACAAQAAAAwADMAAAADAAMAAABYADMAAAAEAAQAAABhACEAAAACAAQAAABAABgAAAAEAAIAAAAWAB0AAAADAAMAAAAnABYAAAACAAQAAAAtAAoAAAACAAIAAAAnAAYAAAAEAAIAAABHAAYAAAAEAAIAAABLAAwAAAACAAQAAABIAAIAAAAEAAIAAABYAP7/AAAEAAQAAABVAAoAAAAEAAIAAABWAD0AAAADAAMAAABPADsAAAACAAIAAABZADkAAAAEAAQAAABJADwAAAADAAMAAABFADoAAAACAAIAAAAsADsAAAAEAAQAAABvABkAAAACAAMAAABtAAMAAAACAAQAAABtAAcAAAACAAIAAABnAAAAAAAEAAIAAABvABIAAAACAAMAAABnABsAAAACAAMAAABqAB4AAAACAAQAAABuACcAAAACAAMAAABsACwAAAADAAMAAABtACoAAAACAAIAAABrACcAAAAEAAQAAABnADUAAAACAAQAAABpADgAAAACAAQAAABrAA4AAAADAAMAAAD//xIAAAACAAQAAAAAABIAAAACAAMAAAACAAAAAAAEAAIAAAACABsAAAACAAMAAAACADUAAAACAAQAAAAEADgAAAACAAQAAAAGAA4AAAADAAMAAAAHACwAAAADAAMAAAAIAAMAAAACAAQAAAAIAAcAAAACAAIAAAAIACoAAAACAAIAAAAKABIAAAACAAMAAAAKABkAAAACAAMAAAAOACEAAAAEAAQAAAAHACMAAAAEAAQAAAAcACQAAAACAAMAAAAeABkAAAADAAMAAADj/zEAAAACAAIAAADl/zUAAAAEAAQAAADg/y0AAAAEAAIAAADm/yQAAAAEAAQAAADg//D/AAAEAAIAAADj//T/AAACAAIAAAABAO7/AAADAAMAAAAHAO//AAADAAMAAAAIAO3/AAACAAIAAAAMAPX/AAAEAAIAAAAWAOz/AAACAAMAAAAaAO3/AAACAAMAAAAiAPb/AAADAAMAAAApAOz/AAAEAAIAAAAsAP7/AAAEAAQAAAAtAPD/AAACAAQAAAAwAPb/AAADAAMAAAA9AOz/AAACAAQAAABDAPX/AAADAAMAAABHAOv/AAACAAIAAABJAO3/AAACAAIAAABJAP//AAADAAMAAABPAP7/AAACAAIAAABRAOz/AAACAAMAAABWAPD/AAAEAAIAAABWAAAAAAADAAMAAABXAPD/AAACAAMAAABYAPb/AAAEAAQAAABsAO//AAADAAMAAABtAO3/AAACAAIAAADe/xQAAAADAAMAAADf/woAAAAEAAIAAADg/wAAAAADAAMAAADg/z0AAAADAAMAAADh//D/AAACAAMAAADh/y0AAAACAAMAAADi//b/AAAEAAQAAADi//7/AAAEAAQAAADi/zMAAAAEAAQAAADj/x0AAAAEAAIAAADj/yUAAAADAAMAAADj/zkAAAAEAAQAAADl/wcAAAAEAAIAAADr/yEAAAACAAQAAADu/xIAAAACAAQAAADv/xIAAAACAAMAAADx/wAAAAAEAAIAAADx/xsAAAACAAMAAADx/zUAAAACAAQAAADz/zgAAAACAAQAAAD0/x4AAAACAAQAAAD1/w4AAAADAAMAAAD1/ycAAAAEAAQAAAD2/+//AAADAAMAAAD2/ywAAAADAAMAAAD3/+3/AAACAAIAAAD3/wMAAAACAAQAAAD3/wcAAAACAAIAAAD3/yoAAAACAAIAAAD4/ycAAAACAAMAAAD5/xIAAAACAAMAAAD5/xkAAAACAAMAAADj//3/AAAEAAQAAADl//n/AAAEAAQAAADx//n/AAACAAQAAADz//z/AAACAAQAAAACAPn/AAACAAQAAAAEAPz/AAACAAQAAAAPAPr/AAAEAAQAAAApAPv/AAADAAMAAAAsAPn/AAACAAQAAAA5AP7/AAADAAMAAAA/APn/AAACAAMAAABBAPr/AAACAAMAAABFAP7/AAACAAIAAABJAPr/AAACAAQAAABKAPr/AAAEAAIAAABZAP3/AAAEAAQAAABnAPn/AAACAAQAAABpAPz/AAACAAQAAAA=")
tile_set = ExtResource("7_61b85")

[node name="lamp" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAAfABgAAAADAAAAAAArAAwAAAADAAAAAABNAAYAAAADAAAAAABdABcAAAADAAAAAABBABoAAAADAAAAAABUACUAAAADAAAAAAA0ADYAAAACAAAAAAAhAC0AAAADAAAAAAAFADYAAAADAAAAAAAJACMAAAADAAAAAAD//xYAAAADAAAAAAABAA0AAAADAAAAAAAUAP3/AAADAAAAAABkAAsAAAACAAAAAAAMAC0AAAACAAAAAAAzAPH/AAADAAAAAAAMAPL/AAADAAAAAABIAPz/AAACAAAAAABqAPT/AAACAAAAAABbAAIAAAADAAAAAABwABsAAAADAAAAAABpADQAAAADAAAAAABmACUAAAADAAAAAADt/wsAAAACAAAAAADv/yUAAAADAAAAAADy/zQAAAADAAAAAADz//T/AAACAAAAAAD5/xsAAAADAAAAAADd/yUAAAADAAAAAADk/wIAAAADAAAAAADm/xcAAAADAAAAAAA=")
tile_set = ExtResource("7_61b85")

[node name="Madotsuki" parent="." instance=ExtResource("4_a2suj")]
position = Vector2(210, 120)

[node name="seamless_detector" parent="." instance=ExtResource("9_0jnag")]
position = Vector2(-336, -176)
expansion = Vector2i(90, 45)
boundary_size = Vector2i(1920, 976)

[editable path="camera"]
