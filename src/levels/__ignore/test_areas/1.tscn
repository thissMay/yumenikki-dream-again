[gd_scene load_steps=11 format=4 uid="uid://dkpwf0m2skd6f"]

[ext_resource type="Script" uid="uid://b1ofr4umso5jf" path="res://src/systems/scenes/game/game_scene.gd" id="1_lu1jh"]
[ext_resource type="PackedScene" uid="uid://ryhx8o46er7i" path="res://src/player/madotsuki/madotsuki.tscn" id="2_hs5ie"]
[ext_resource type="PackedScene" uid="uid://c8bnpo28a373g" path="res://src/systems/camera/camera.tscn" id="3_hs5ie"]
[ext_resource type="Shader" uid="uid://dqxrs4a4y611c" path="res://src/shaders/panorama/linear.gdshader" id="7_5o7lw"]
[ext_resource type="Script" uid="uid://bokon3yk8g4bw" path="res://src/systems/utils/on_screen_notifier.gd" id="8_4e31m"]
[ext_resource type="Texture2D" uid="uid://crn4ltkx2gral" path="res://src/images/panorama/temp.png" id="8_mg6m7"]
[ext_resource type="TileSet" uid="uid://crsr3gx0s6ht5" path="res://src/levels/__ignore/tilemaps/apartment.tres" id="8_rj2un"]
[ext_resource type="Shader" uid="uid://bqp8m8worpqyn" path="res://src/shaders/panorama/linear_fog.gdshader" id="9_g3ykr"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_n2rfh"]
shader = ExtResource("7_5o7lw")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_3su0q"]
shader = ExtResource("9_g3ykr")

[node name="1" type="Node"]
script = ExtResource("1_lu1jh")
metadata/_custom_type_script = "uid://b1ofr4umso5jf"

[node name="panorama (bottom_layer)" type="CanvasLayer" parent="."]
layer = -30

[node name="TextureRect" type="TextureRect" parent="panorama (bottom_layer)"]
material = SubResource("ShaderMaterial_n2rfh")
offset_right = 40.0
offset_bottom = 40.0
texture = ExtResource("8_mg6m7")

[node name="TextureRect2" type="TextureRect" parent="panorama (bottom_layer)"]
material = SubResource("ShaderMaterial_3su0q")
offset_right = 40.0
offset_bottom = 40.0
texture = ExtResource("8_mg6m7")

[node name="camera" parent="." instance=ExtResource("3_hs5ie")]

[node name="camera_handler" parent="camera" index="0" node_paths=PackedStringArray("target")]
position = Vector2(240, 136)
target = NodePath("../../Node2D/Madotsuki")

[node name="Node2D" type="Node2D" parent="."]

[node name="OnScreenNotifier" type="VisibleOnScreenNotifier2D" parent="Node2D"]
rect = Rect2(0, 0, 480, 270)
script = ExtResource("8_4e31m")
metadata/_custom_type_script = "uid://bokon3yk8g4bw"

[node name="Madotsuki" parent="Node2D" instance=ExtResource("2_hs5ie")]
position = Vector2(-464, 112)
stamina_drain = 0.0

[node name="TileMapLayer" type="TileMapLayer" parent="Node2D"]
tile_map_data = PackedByteArray("AAAMAAkAAAABAAYAAAALAAkAAAABAAYAAAAKAAkAAAABAAUAAAAJAAkAAAABAAUAAAAIAAkAAAABAAUAAAAHAAkAAAABAAYAAAAGAAgAAAABAAUAAAAFAAgAAAABAAYAAAAEAAgAAAABAAUAAAADAAgAAAABAAYAAAADAAcAAAABAAUAAAACAAcAAAABAAUAAAACAAYAAAABAAYAAAABAAYAAAABAAYAAAAAAAYAAAABAAUAAAD//wYAAAABAAUAAAD+/wYAAAABAAUAAAD9/wYAAAABAAUAAAAAAAUAAAABAAYAAAD//wUAAAABAAYAAAD+/wUAAAABAAYAAAD9/wUAAAABAAYAAAD8/wUAAAABAAUAAAABAAUAAAABAAUAAAACAAUAAAABAAYAAAD//wQAAAABAAUAAAD+/wQAAAABAAUAAAD9/wQAAAABAAYAAAD8/wQAAAABAAYAAAD7/wQAAAABAAUAAAAAAAQAAAABAAYAAAAAAAMAAAABAAUAAAD//wMAAAABAAUAAAD+/wMAAAABAAUAAAD9/wMAAAABAAYAAAD8/wMAAAABAAUAAAD7/wMAAAABAAUAAAD7/wIAAAABAAYAAAD6/wIAAAABAAYAAAD8/wIAAAABAAYAAAD9/wIAAAABAAYAAAD+/wIAAAABAAYAAAD6/wEAAAABAAUAAAD7/wEAAAABAAUAAAD8/wEAAAABAAUAAAD9/wEAAAABAAUAAAD+/wEAAAABAAUAAAABAAMAAAABAAUAAAACAAMAAAABAAYAAAADAAMAAAABAAUAAAAEAAQAAAABAAYAAAAFAAQAAAABAAUAAAADAAUAAAABAAYAAAAEAAUAAAABAAUAAAAFAAUAAAABAAYAAAAGAAYAAAABAAUAAAAHAAYAAAABAAUAAAAFAAYAAAABAAYAAAAEAAYAAAABAAUAAAADAAYAAAABAAUAAAAHAAcAAAABAAUAAAAGAAcAAAABAAUAAAAFAAcAAAABAAYAAAAEAAcAAAABAAUAAAAIAAcAAAABAAUAAAAJAAgAAAABAAYAAAAKAAgAAAABAAUAAAAIAAgAAAABAAUAAAAHAAgAAAABAAYAAAALAAgAAAABAAYAAAAMAAgAAAABAAUAAAANAAgAAAABAAYAAAAOAAgAAAABAAYAAAAJAAcAAAABAAYAAAAKAAcAAAABAAYAAAALAAcAAAABAAYAAAAMAAcAAAABAAYAAAAPAAgAAAABAAUAAAAQAAgAAAABAAUAAAARAAkAAAABAAUAAAAQAAkAAAABAAYAAAAPAAkAAAABAAUAAAAOAAkAAAABAAYAAAANAAkAAAABAAYAAAAQAAoAAAABAAYAAAARAAoAAAABAAUAAAASAAoAAAABAAYAAAATAAoAAAABAAYAAAAPAAoAAAABAAUAAAAOAAoAAAABAAUAAAATAAsAAAABAAUAAAAUAAsAAAABAAUAAAASAAsAAAABAAUAAAARAAsAAAABAAYAAAAQAAsAAAABAAUAAAAPAAsAAAABAAYAAAAVAAsAAAABAAUAAAAWAAsAAAABAAYAAAATAAwAAAABAAUAAAASAAwAAAABAAYAAAARAAwAAAABAAUAAAAQAAwAAAABAAUAAAAPAAwAAAABAAYAAAAOAAwAAAABAAYAAAAUAA0AAAABAAYAAAAVAA0AAAABAAUAAAATAA0AAAABAAYAAAASAA0AAAABAAYAAAAWAA4AAAABAAUAAAAVAA4AAAABAAYAAAAUAA4AAAABAAYAAAATAA4AAAABAAUAAAAXAA4AAAABAAYAAAAUAA8AAAABAAUAAAAVAA8AAAABAAUAAAAWAA8AAAABAAYAAAAXAA8AAAABAAYAAAAWABAAAAABAAUAAAAVABAAAAABAAUAAAAXABAAAAABAAUAAAAXABEAAAABAAUAAAAWABEAAAABAAYAAAAVABEAAAABAAYAAAAYABEAAAABAAUAAAAXABIAAAABAAUAAAAWABIAAAABAAYAAAAYABIAAAABAAUAAAAYABMAAAABAAYAAAAZABMAAAABAAUAAAAaABMAAAABAAYAAAAbABMAAAABAAYAAAAcABMAAAABAAUAAAAdABMAAAABAAYAAAAeABMAAAABAAUAAAAfABMAAAABAAYAAAAfABQAAAABAAYAAAAgABQAAAABAAYAAAAeABQAAAABAAYAAAAdABQAAAABAAUAAAAfABUAAAABAAYAAAAgABUAAAABAAUAAAAhABUAAAABAAYAAAAeABUAAAABAAYAAAAhABYAAAABAAYAAAAgABYAAAABAAUAAAAfABYAAAABAAYAAAAfABcAAAABAAYAAAAeABcAAAABAAUAAAAgABcAAAABAAUAAAAhABcAAAABAAYAAAAiABcAAAABAAYAAAAfABgAAAABAAYAAAAgABgAAAABAAYAAAAhABgAAAABAAUAAAAiABgAAAABAAYAAAAgABkAAAABAAYAAAAhABkAAAABAAYAAAAiABkAAAABAAYAAAAjABkAAAABAAYAAAAkABoAAAABAAYAAAAlABoAAAABAAYAAAAmABoAAAABAAYAAAAnABoAAAABAAYAAAAoABoAAAABAAUAAAAoABkAAAABAAYAAAApABkAAAABAAYAAAAqABkAAAABAAUAAAApABgAAAABAAYAAAAqABgAAAABAAYAAAArABgAAAABAAYAAAAsABgAAAABAAYAAAAqABcAAAABAAYAAAArABcAAAABAAUAAAAsABcAAAABAAUAAAAtABcAAAABAAUAAAAuABcAAAABAAUAAAAvABcAAAABAAYAAAAsABYAAAABAAUAAAAtABYAAAABAAYAAAAuABYAAAABAAUAAAAvABUAAAABAAYAAAAuABUAAAABAAUAAAAwABUAAAABAAYAAAAwABQAAAABAAYAAAAvABQAAAABAAYAAAAuABQAAAABAAYAAAAvABMAAAABAAUAAAAwABMAAAABAAYAAAAwABIAAAABAAUAAAAxABIAAAABAAYAAAAxABEAAAABAAYAAAAxABAAAAABAAYAAAAwABAAAAABAAYAAAAxAA8AAAABAAUAAAAyAA8AAAABAAYAAAAzAA8AAAABAAUAAAA0AA4AAAABAAYAAAA1AA4AAAABAAUAAAA2AA4AAAABAAUAAAA2AA0AAAABAAUAAAA3AA0AAAABAAYAAAA4AA0AAAABAAYAAAA4AA4AAAABAAUAAAA4AA8AAAABAAYAAAA4ABAAAAABAAYAAAA4ABEAAAABAAYAAAA3ABIAAAABAAYAAAA4ABIAAAABAAYAAAA5ABMAAAABAAYAAAA6ABMAAAABAAUAAAA6ABQAAAABAAYAAAA7ABMAAAABAAUAAAA8ABQAAAABAAYAAAA9ABQAAAABAAUAAAA+ABQAAAABAAYAAAA/ABQAAAABAAYAAABAABQAAAABAAUAAABBABQAAAABAAYAAABCABUAAAABAAYAAABBABUAAAABAAUAAABAABUAAAABAAUAAAA/ABUAAAABAAYAAABCABQAAAABAAUAAABDABQAAAABAAYAAABBABMAAAABAAYAAABAABMAAAABAAYAAAA/ABMAAAABAAYAAAA+ABMAAAABAAYAAAA9ABMAAAABAAUAAAA8ABMAAAABAAUAAAA5ABIAAAABAAYAAAA6ABIAAAABAAUAAAA7ABIAAAABAAUAAAA8ABIAAAABAAYAAAA9ABIAAAABAAYAAAA+ABIAAAABAAYAAAA3ABEAAAABAAUAAAA2ABEAAAABAAYAAAA5ABEAAAABAAUAAAA6ABEAAAABAAYAAAA7ABEAAAABAAYAAAA8ABEAAAABAAUAAAA3ABAAAAABAAUAAAA2ABAAAAABAAUAAAA5ABAAAAABAAYAAAA6ABAAAAABAAUAAAA7ABAAAAABAAYAAAA8ABAAAAABAAYAAAA9ABAAAAABAAUAAAA3AA8AAAABAAUAAAA2AA8AAAABAAUAAAA5AA8AAAABAAYAAAA6AA8AAAABAAUAAAA3AA4AAAABAAYAAAA5AA4AAAABAAUAAAA6AA4AAAABAAUAAAA5AA0AAAABAAUAAAA1AA0AAAABAAUAAAA0AA0AAAABAAUAAAAzAA0AAAABAAYAAAAyAA0AAAABAAYAAAAxAA0AAAABAAYAAAAwAA0AAAABAAUAAAAvAAwAAAABAAYAAAAuAAwAAAABAAUAAAAwAAwAAAABAAYAAAAxAAwAAAABAAUAAAAyAAwAAAABAAUAAAAtAAwAAAABAAYAAAAzAAwAAAABAAUAAAAwAAsAAAABAAUAAAAvAAsAAAABAAYAAAAuAAsAAAABAAYAAAAtAAsAAAABAAUAAAAtAAoAAAABAAYAAAAuAAoAAAABAAYAAAAvAAoAAAABAAYAAAAwAAoAAAABAAUAAAAxAAoAAAABAAYAAAAyAAoAAAABAAUAAAAtAAkAAAABAAYAAAAuAAkAAAABAAUAAAAvAAkAAAABAAUAAAAwAAkAAAABAAUAAAAxAAkAAAABAAUAAAAtAAgAAAABAAUAAAAsAAgAAAABAAYAAAAuAAgAAAABAAYAAAAvAAgAAAABAAUAAAAwAAgAAAABAAUAAAAsAAcAAAABAAYAAAArAAcAAAABAAUAAAAsAAYAAAABAAYAAAAtAAYAAAABAAUAAAAuAAYAAAABAAYAAAAvAAYAAAABAAUAAAArAAYAAAABAAYAAAAqAAYAAAABAAUAAAAtAAUAAAABAAUAAAAsAAUAAAABAAUAAAArAAUAAAABAAUAAAAqAAUAAAABAAUAAAApAAUAAAABAAYAAAApAAQAAAABAAYAAAAqAAQAAAABAAYAAAArAAQAAAABAAUAAAAqAAMAAAABAAUAAAApAAMAAAABAAUAAAAoAAMAAAABAAYAAAAnAAMAAAABAAUAAAAmAAMAAAABAAYAAAAnAAIAAAABAAYAAAAoAAIAAAABAAYAAAApAAIAAAABAAUAAAAnAAEAAAABAAYAAAAmAAEAAAABAAUAAAAoAAEAAAABAAYAAAAlAAEAAAABAAYAAAAkAAEAAAABAAYAAAApAAEAAAABAAYAAAAqAAEAAAABAAYAAAAjAAEAAAABAAYAAAAiAAEAAAABAAYAAAAhAAAAAAABAAUAAAAgAAAAAAABAAYAAAAfAAAAAAABAAUAAAAeAAAAAAABAAUAAAAiAAAAAAABAAYAAAAjAAAAAAABAAUAAAAkAAAAAAABAAYAAAAjAP//AAABAAYAAAAiAP//AAABAAYAAAAhAP//AAABAAUAAAAgAP//AAABAAYAAAAfAP//AAABAAYAAAAeAP7/AAABAAYAAAAdAP7/AAABAAYAAAAfAP7/AAABAAUAAAAgAP7/AAABAAYAAAAcAP3/AAABAAYAAAAbAP3/AAABAAYAAAAdAP3/AAABAAYAAAAaAP3/AAABAAUAAAAeAP3/AAABAAYAAAAfAP3/AAABAAYAAAAgAP3/AAABAAYAAAAZAP3/AAABAAUAAAAYAP3/AAABAAUAAAAXAPz/AAABAAYAAAAYAPz/AAABAAUAAAAZAPz/AAABAAUAAAAaAPz/AAABAAYAAAAbAPz/AAABAAUAAAAWAPv/AAABAAUAAAAVAPv/AAABAAUAAAAUAPv/AAABAAYAAAATAPv/AAABAAYAAAAUAPr/AAABAAUAAAAVAPr/AAABAAUAAAAWAPr/AAABAAYAAAAXAPr/AAABAAUAAAAYAPr/AAABAAYAAAATAPr/AAABAAUAAAASAPr/AAABAAYAAAARAPr/AAABAAYAAAAQAPr/AAABAAYAAAAPAPr/AAABAAUAAAAOAPr/AAABAAUAAAAXAPv/AAABAAYAAAASAPv/AAABAAYAAAARAPv/AAABAAUAAAAQAPv/AAABAAUAAAAPAPv/AAABAAUAAAAOAPv/AAABAAUAAAANAPv/AAABAAYAAAAMAPv/AAABAAUAAAALAPv/AAABAAYAAAAPAPz/AAABAAYAAAAOAPz/AAABAAUAAAANAPz/AAABAAYAAAAMAPz/AAABAAYAAAALAPz/AAABAAYAAAAKAPz/AAABAAYAAAAJAPz/AAABAAYAAAAMAP3/AAABAAYAAAANAP3/AAABAAYAAAAOAP3/AAABAAYAAAALAP3/AAABAAYAAAAKAP3/AAABAAYAAAAJAP3/AAABAAYAAAAIAP3/AAABAAUAAAAHAP3/AAABAAYAAAAGAP3/AAABAAYAAAAIAP7/AAABAAUAAAAJAP7/AAABAAYAAAAHAP7/AAABAAUAAAAGAP7/AAABAAUAAAAFAP7/AAABAAYAAAAFAP//AAABAAYAAAAGAP//AAABAAUAAAAHAP//AAABAAYAAAAIAP//AAABAAUAAAAEAP//AAABAAYAAAADAP//AAABAAUAAAACAP//AAABAAUAAAABAP//AAABAAYAAAAEAAAAAAABAAUAAAAFAAAAAAABAAYAAAADAAAAAAABAAUAAAACAAAAAAABAAUAAAABAAAAAAABAAUAAAAAAAAAAAABAAYAAAD//wAAAAABAAYAAAD+/wAAAAABAAYAAAADAAEAAAABAAUAAAACAAEAAAABAAYAAAABAAEAAAABAAYAAAAAAAEAAAABAAUAAAD//wEAAAABAAYAAAD5/wEAAAABAAUAAAAAAAIAAAABAAUAAAD//wIAAAABAAYAAAD5/wIAAAABAAUAAAD4/wIAAAABAAYAAAD3/wIAAAABAAYAAAD2/wIAAAABAAUAAAD1/wIAAAABAAYAAAD6/wMAAAABAAUAAAD5/wMAAAABAAYAAAD4/wMAAAABAAUAAAD3/wMAAAABAAUAAAD2/wMAAAABAAUAAAD1/wMAAAABAAUAAAD0/wMAAAABAAYAAADz/wMAAAABAAUAAADy/wMAAAABAAUAAADx/wMAAAABAAYAAADw/wMAAAABAAYAAADz/wQAAAABAAYAAAD0/wQAAAABAAUAAAD1/wQAAAABAAUAAAD2/wQAAAABAAYAAADy/wQAAAABAAYAAADx/wQAAAABAAUAAADw/wQAAAABAAUAAADv/wQAAAABAAUAAADu/wQAAAABAAUAAAD1/wUAAAABAAYAAAD2/wUAAAABAAUAAAD0/wUAAAABAAUAAADz/wUAAAABAAUAAADy/wUAAAABAAUAAADx/wUAAAABAAUAAADw/wUAAAABAAYAAADv/wUAAAABAAYAAADu/wUAAAABAAYAAADt/wUAAAABAAYAAADs/wUAAAABAAUAAADr/wUAAAABAAUAAADq/wUAAAABAAYAAADp/wUAAAABAAUAAADw/wYAAAABAAUAAADx/wYAAAABAAYAAADv/wYAAAABAAYAAADu/wYAAAABAAUAAADt/wYAAAABAAYAAADs/wYAAAABAAYAAADr/wYAAAABAAUAAADq/wYAAAABAAUAAADx/wcAAAABAAUAAADy/wcAAAABAAUAAADz/wcAAAABAAUAAAD0/wcAAAABAAYAAADw/wcAAAABAAUAAADv/wcAAAABAAYAAADu/wcAAAABAAYAAADt/wcAAAABAAUAAADs/wcAAAABAAUAAADr/wcAAAABAAUAAADt/wgAAAABAAUAAADu/wgAAAABAAYAAADv/wgAAAABAAUAAADw/wgAAAABAAYAAADx/wkAAAABAAYAAADy/wkAAAABAAUAAADw/wkAAAABAAYAAADv/wkAAAABAAUAAADu/wkAAAABAAYAAADt/wkAAAABAAYAAADu/woAAAABAAYAAADv/woAAAABAAYAAADv/wsAAAABAAYAAADu/wsAAAABAAYAAADt/wsAAAABAAYAAADv/wwAAAABAAUAAADu/wwAAAABAAYAAADt/w0AAAABAAUAAADs/w0AAAABAAYAAADs/w4AAAABAAUAAADt/w4AAAABAAUAAADu/w8AAAABAAYAAADv/w8AAAABAAYAAADw/w8AAAABAAYAAADw/xAAAAABAAYAAADv/xAAAAABAAUAAADu/xAAAAABAAUAAADw/xEAAAABAAYAAADx/xEAAAABAAUAAADy/xEAAAABAAUAAADz/xEAAAABAAUAAADz/xIAAAABAAYAAAD0/xIAAAABAAYAAADy/xIAAAABAAYAAADz/xMAAAABAAUAAAD0/xMAAAABAAYAAAD1/xMAAAABAAUAAAD2/xMAAAABAAUAAAD3/xMAAAABAAUAAAD4/xQAAAABAAYAAAD5/xQAAAABAAYAAAD3/xQAAAABAAUAAAD2/xQAAAABAAYAAAD1/xQAAAABAAYAAAD5/xUAAAABAAYAAAD4/xUAAAABAAYAAAD3/xUAAAABAAYAAAD2/xUAAAABAAYAAAD6/xUAAAABAAUAAAD6/xYAAAABAAUAAAD5/xYAAAABAAUAAAD4/xYAAAABAAYAAAD3/xYAAAABAAUAAAD2/xYAAAABAAUAAAD7/xYAAAABAAYAAAD8/xcAAAABAAUAAAD9/xcAAAABAAUAAAD+/xcAAAABAAUAAAD//xgAAAABAAUAAAAAABgAAAABAAYAAAABABgAAAABAAYAAAD+/xgAAAABAAUAAAACABkAAAABAAYAAAADABkAAAABAAYAAAABABkAAAABAAYAAAAEABkAAAABAAUAAAAFABkAAAABAAUAAAAGABkAAAABAAYAAAAHABkAAAABAAYAAAAIABkAAAABAAYAAAAIABoAAAABAAYAAAAHABoAAAABAAUAAAAGABoAAAABAAUAAAAJABkAAAABAAYAAAAKABkAAAABAAUAAAALABkAAAABAAYAAAAMABkAAAABAAUAAAANABkAAAABAAUAAAAOABkAAAABAAYAAAAPABoAAAABAAYAAAAOABoAAAABAAUAAAAQABoAAAABAAYAAAARABoAAAABAAYAAAASABoAAAABAAUAAAATABoAAAABAAUAAAAUABoAAAABAAYAAAAVABoAAAABAAUAAAAWABoAAAABAAYAAAAXABoAAAABAAUAAAAYABoAAAABAAYAAAAZABoAAAABAAYAAAAaABoAAAABAAYAAAAbABoAAAABAAUAAAAcABoAAAABAAUAAAAdABoAAAABAAYAAAAeABoAAAABAAYAAAAeABkAAAABAAUAAAAfABkAAAABAAYAAAA=")
tile_set = ExtResource("8_rj2un")

[editable path="camera"]
[editable path="Node2D/Madotsuki"]
